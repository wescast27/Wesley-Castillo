<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>4b4cabc1f3594b499f5d71434aafac72</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
<link rel="stylesheet" href="/SlkbZzAEiko6Qv85"/></head>
<body>
<div class="cell markdown" id="EkukdTCV0sbN">
<p>2/29/2024 | Wes Castillo | Homework 2 | 3440-1</p>
</div>
<div class="cell markdown" id="zRad1Kd_D9j1">
<p>This File is 2/3 of the 3 problems in the assignment</p>
</div>
<section id="the-prompt" class="cell markdown" id="j6QOx3MG1CJs">
<h3>The Prompt:</h3>
</section>
<div class="cell markdown" id="26LFJbKj1G5J">
<p>Your instructor decides to quit DU and move to Japan to be with his
daughter and new grandchild. Since Japan is like England and the driver
sits on the right and traffic flows on the left side of the road, his
American cars are useless in Japan. Therefore, he is going to give his 5
cars (Mazda CX-5, Tesla Model 3, Ford Focus, Tesla Cybertruck, and Jeep
Wrangler), to his three favorite INFO 3440 students. You know who you
are :) but for these purposes, we will call you Student 1, Student 2,
and Student 3.</p>
</div>
<section id="the-constraints" class="cell markdown" id="_umlbqWL1NYF">
<h3>The Constraints</h3>
</section>
<div class="cell markdown" id="O75KZyI_1XdC">
<ul>
<li><p>No student can receive more than three cars</p></li>
<li><p>Each student must receive at least one car</p></li>
<li><p>Your instructor doesn't want to deal with this anymore, so all
the cars must be given away</p></li>
<li><p>If a student gets one of the Teslas, (s)he cannot receive the
other Tesla</p></li>
<li><p>Student 1 is obviously his most favorite, so in this case Student
2 may not receive more cars than student 1</p></li>
<li><p>Obviously, the same car can not be given to more than 1
student</p></li>
<li><p>To help with gas mileage concerns, If the Jeep Wrangler goes to
Student 1, then Student 1 must also get the Ford Focus.</p></li>
<li><p>If Student 1 gets the Ford Focus OR if Student 2 gets the
Cybertruck, then the CX-5 must go to Student 3.</p></li>
<li><p>As we have also established, your instructor is basically lazy
and wants to minimize the number of miles he has to drive to drop these
cars off at the students' houses. Student 1 lives 17 miles away from
your instructor, where student 2 lives 12 miles away and student 3 lives
15 miles away</p></li>
</ul>
</div>
<section id="the-solution" class="cell markdown" id="78AXKwi0OAiD">
<h2>The Solution</h2>
</section>
<div class="cell markdown" id="xWRikp7VOD5A">
<p>Optimal Assignment:</p>
<p>FordFocus is given to Student1</p>
<p>TeslaCybertruck is given to Student1</p>
<p>TeslaModel3 is given to Student2</p>
<p>JeepWrangler is given to Student2</p>
<p>MazdaCX5 is given to Student3</p>
<hr />
<p>Below is my documentation of how I solved the problem.</p>
</div>
<section id="problem-2" class="cell markdown" id="BwPrVT5q1-aI">
<h3>Problem 2</h3>
</section>
<div class="cell markdown" id="ci_J_FZKP1Zz">
<p>Now using your favorite GAI tool (ChatGPT, Bard, Claude, etc.), have
it solve the problem. Be sure to show all the prompts that you give the
GAI tool and how it responds. Put that into a Jupyter Notebook and
export it as HTML.</p>
</div>
<section id="prompt" class="cell markdown" id="TvdVPeA7WvdK">
<h2>Prompt:</h2>
</section>
<div class="cell markdown" id="pTXBfBLEQDrd">
<p>Below this paragraph is an optimization problem that was dropped on
my suddenly and I need help to solve quickly. Because I am in a rush, I
would like you to return to me the entirety of the code that would be
necessary to solve this problem, keep in my that I am using Google
Collab and Python, I only want to use pandas and pyomo.environ. When you
return the code, make sure it is optimized to be as little code as
possible. Remember to create a model that minimizes distance driven and
satisfies all the logical constraints including that there are only one
of each car to give. The code you return should: Import the necessary
libraries, create the decision variables, define the objective function,
define and integrate all constraints, run the model, and lastly display
the results.</p>
<hr />
<p>Consider the following problem:</p>
<p>Your instructor decides to quit DU and move to Japan to be with his
daughter and new grandchild. Since Japan is like England and the driver
sits on the right and traffic flows on the left side of the road, his
American cars are useless in Japan. Therefore, he is going to give his 5
cars (Mazda CX-5, Tesla Model 3, Ford Focus, Tesla Cybertruck, and Jeep
Wrangler), to his three favorite INFO 3440 students. You know who you
are :) but for these purposes, we will call you Student 1, Student 2,
and Student 3.</p>
<hr />
<p>Of course there's some rules to this giveaway:</p>
<p>No student can receive more than three cars</p>
<p>Each student must receive at least one car</p>
<p>Your instructor doesn't want to deal with this anymore, so all the
cars must be given away</p>
<p>If a student gets one of the Teslas, (s)he cannot receive the other
Tesla</p>
<p>Student 1 is obviously his most favorite, so in this case Student 2
may not receive more cars than student 1</p>
<p>The same car can not be given to more than 1 student</p>
<p>To help with gas mileage concerns, If the Jeep Wrangler goes to
Student 1, then Student 1 must also get the Ford Focus.</p>
<p>If Student 1 gets the Ford Focus OR if Student 2 gets the Cybertruck,
then the CX-5 must go to Student 3.</p>
<hr />
<p>As we have also established, your instructor wants to minimize the
number of miles he has to drive to drop these cars off at the students'
houses. Student 1 lives 17 miles away from your instructor, where
student 2 lives 12 miles away and student 3 lives 15 miles away</p>
<p>Using Python and Pyomo, create a detailed, highly descriptive Collab
Notebook that finds an optimal solution to this problem.</p>
</div>
<section id="response" class="cell markdown" id="GXfsFI-xQEt7">
<h2>Response:</h2>
</section>
<div class="cell markdown" id="3--j7UTjW3Ux">
<p>Certainly! Below is the Python code that uses pandas and
pyomo.environ to solve the optimization problem as described. This code
will define the decision variables, objective function, and constraints,
and then solve the model to minimize the distance driven while adhering
to the logical constraints of the car giveaway scenario.</p>
<pre><code># Import the necessary libraries
import pandas as pd
from pyomo.environ import *

# Define the model
model = ConcreteModel()

# Define decision variables
cars = [&#39;MazdaCX5&#39;, &#39;TeslaModel3&#39;, &#39;FordFocus&#39;, &#39;TeslaCybertruck&#39;, &#39;JeepWrangler&#39;]
students = [&#39;Student1&#39;, &#39;Student2&#39;, &#39;Student3&#39;]
distances = {&#39;Student1&#39;: 17, &#39;Student2&#39;: 12, &#39;Student3&#39;: 15}

# Binary decision variable for car assignment (1 if car i is given to student j, 0 otherwise)
model.assign = Var(((student, car) for student in students for car in cars), within=Binary)

# Objective: Minimize total distance driven
def obj_rule(model):
    return sum(model.assign[student, car] * distances[student] for student in students for car in cars)
model.objective = Objective(rule=obj_rule, sense=minimize)

# Constraints
# Each car is given to exactly one student
def one_car_rule(model, car):
    return sum(model.assign[student, car] for student in students) == 1
model.one_car_constraint = Constraint(cars, rule=one_car_rule)

# No student can receive more than three cars
def max_three_cars_rule(model, student):
    return sum(model.assign[student, car] for car in cars) &lt;= 3
model.max_three_cars_constraint = Constraint(students, rule=max_three_cars_rule)

# Each student must receive at least one car
def min_one_car_rule(model, student):
    return sum(model.assign[student, car] for car in cars) &gt;= 1
model.min_one_car_constraint = Constraint(students, rule=min_one_car_rule)

# If a student gets one of the Teslas, they cannot receive the other Tesla
def one_tesla_rule(model, student):
    return sum(model.assign[student, &#39;TeslaModel3&#39;] + model.assign[student, &#39;TeslaCybertruck&#39;]) &lt;= 1
model.one_tesla_constraint = Constraint(students, rule=one_tesla_rule)

# Student 2 may not receive more cars than Student 1
def student1_fav_rule(model):
    return sum(model.assign[&#39;Student2&#39;, car] for car in cars) &lt;= sum(model.assign[&#39;Student1&#39;, car] for car in cars)
model.student1_fav_constraint = Constraint(rule=student1_fav_rule)

# If Jeep Wrangler goes to Student 1, then Student 1 must also get the Ford Focus
def jeep_focus_rule(model):
    return model.assign[&#39;Student1&#39;, &#39;JeepWrangler&#39;] - model.assign[&#39;Student1&#39;, &#39;FordFocus&#39;] &lt;= 0
model.jeep_focus_constraint = Constraint(rule=jeep_focus_rule)

# If Student 1 gets the Ford Focus OR Student 2 gets the Cybertruck, then the CX-5 must go to Student 3
def cx5_rule(model):
    return model.assign[&#39;Student1&#39;, &#39;FordFocus&#39;] + model.assign[&#39;Student2&#39;, &#39;TeslaCybertruck&#39;] - model.assign[&#39;Student3&#39;, &#39;MazdaCX5&#39;] &lt;= 0
model.cx5_constraint = Constraint(rule=cx5_rule)

# Solve the model
solver = SolverFactory(&#39;glpk&#39;)
solver.solve(model)

# Display the results
print(&quot;Optimal Assignment:&quot;)
for student in students:
    for car in cars:
        if model.assign[student, car].value == 1:
            print(f&quot;{car} is given to {student}&quot;)
</code></pre>
<p>This code snippet is designed to be concise and directly to the
point, fulfilling the requirements of using only pandas and
pyomo.environ while adhering to the constraints specified in the
problem. You just need to copy this code into a Google Colab notebook
and run it. Make sure you have pyomo and glpk installed in your
environment, or adjust the solver setup if using a different solver.</p>
</div>
<section id="prompt-2" class="cell markdown" id="ZWtBiCuDYNP9">
<h2>Prompt 2</h2>
</section>
<div class="cell markdown" id="gBxXTzYoYQvo">
<p>I am getting this error on your tesla constraint, please fix it and
ensure that if this error will effect other constraints you revise those
as well.</p>
<p>ERROR:pyomo.core:Rule failed when generating expression for
Constraint one_tesla_constraint with index Student1: TypeError:
'LinearExpression' object is not iterable ERROR:pyomo.core:Constructing
component 'one_tesla_constraint' from data=None failed: TypeError:
'LinearExpression' object is not iterable
---------------------------------------------------------------------------
TypeError Traceback (most recent call last)
<ipython-input-5-4068d03a594a> in &lt;cell line: 20&gt;() 18 def
one_tesla_rule(model, student): 19 return sum(model.assign[student,
'TeslaModel3'] + model.assign[student, 'TeslaCybertruck']) &lt;= 1
---&gt; 20 model.one_tesla_constraint = Constraint(students,
rule=one_tesla_rule) 21 22 # Student 2 may not receive more cars than
Student 1</p>
<p>4 frames <ipython-input-5-4068d03a594a> in one_tesla_rule(model,
student) 17 # If a student gets one of the Teslas, they cannot receive
the other Tesla 18 def one_tesla_rule(model, student): ---&gt; 19 return
sum(model.assign[student, 'TeslaModel3'] + model.assign[student,
'TeslaCybertruck']) &lt;= 1 20 model.one_tesla_constraint =
Constraint(students, rule=one_tesla_rule) 21</p>
<p>TypeError: 'LinearExpression' object is not iterable</p>
</div>
<section id="response" class="cell markdown" id="kt_Vydi0YdUs">
<h2>Response:</h2>
</section>
<div class="cell markdown" id="Nma0zLjoYe-7">
<p>The error you're encountering is because the sum function is being
applied incorrectly to the Pyomo variables. In the constraint where
you're checking if a student gets one of the Teslas and ensuring they
cannot receive the other, you don't need to use sum since you're only
dealing with two variables. Here's the corrected version of the Tesla
constraint and a check to ensure other constraints are correctly
defined:</p>
<pre><code># Corrected Tesla constraint
def one_tesla_rule(model, student):
    return model.assign[student, &#39;TeslaModel3&#39;] + model.assign[student, &#39;TeslaCybertruck&#39;] &lt;= 1
model.one_tesla_constraint = Constraint(students, rule=one_tesla_rule)</code></pre>
<p>This correction should resolve the TypeError you encountered. The
rest of the constraints should work as expected if they were correctly
using the sum function for iterating over multiple items or were
directly applying arithmetic operations to Pyomo variables.</p>
</div>
<section id="integration" class="cell markdown" id="cDEFEDN7QGEe">
<h2>Integration</h2>
</section>
<div class="cell code"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="CHkicwyuUmYL" data-outputId="95d6bc2f-60f9-4ed7-9909-9edff06e8410">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pyomo</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>apt<span class="op">-</span>get install <span class="op">-</span>y <span class="op">-</span>qq glpk<span class="op">-</span>utils</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Collecting pyomo
  Downloading Pyomo-6.7.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.7 MB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.7/12.7 MB 59.4 MB/s eta 0:00:00
 pyomo)
  Downloading ply-3.11-py2.py3-none-any.whl (49 kB)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 49.6/49.6 kB 5.1 MB/s eta 0:00:00
o
Successfully installed ply-3.11 pyomo-6.7.1
Selecting previously unselected package libsuitesparseconfig5:amd64.
(Reading database ... 121749 files and directories currently installed.)
Preparing to unpack .../libsuitesparseconfig5_1%3a5.10.1+dfsg-4build1_amd64.deb ...
Unpacking libsuitesparseconfig5:amd64 (1:5.10.1+dfsg-4build1) ...
Selecting previously unselected package libamd2:amd64.
Preparing to unpack .../libamd2_1%3a5.10.1+dfsg-4build1_amd64.deb ...
Unpacking libamd2:amd64 (1:5.10.1+dfsg-4build1) ...
Selecting previously unselected package libcolamd2:amd64.
Preparing to unpack .../libcolamd2_1%3a5.10.1+dfsg-4build1_amd64.deb ...
Unpacking libcolamd2:amd64 (1:5.10.1+dfsg-4build1) ...
Selecting previously unselected package libglpk40:amd64.
Preparing to unpack .../libglpk40_5.0-1_amd64.deb ...
Unpacking libglpk40:amd64 (5.0-1) ...
Selecting previously unselected package glpk-utils.
Preparing to unpack .../glpk-utils_5.0-1_amd64.deb ...
Unpacking glpk-utils (5.0-1) ...
Setting up libsuitesparseconfig5:amd64 (1:5.10.1+dfsg-4build1) ...
Setting up libamd2:amd64 (1:5.10.1+dfsg-4build1) ...
Setting up libcolamd2:amd64 (1:5.10.1+dfsg-4build1) ...
Setting up libglpk40:amd64 (5.0-1) ...
Setting up glpk-utils (5.0-1) ...
Processing triggers for man-db (2.10.2-1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.4) ...
/sbin/ldconfig.real: /usr/local/lib/libtbbbind_2_0.so.3 is not a symbolic link

/sbin/ldconfig.real: /usr/local/lib/libtbbmalloc_proxy.so.2 is not a symbolic link

/sbin/ldconfig.real: /usr/local/lib/libtbbmalloc.so.2 is not a symbolic link

/sbin/ldconfig.real: /usr/local/lib/libtbb.so.12 is not a symbolic link

/sbin/ldconfig.real: /usr/local/lib/libtbbbind_2_5.so.3 is not a symbolic link

/sbin/ldconfig.real: /usr/local/lib/libtbbbind.so.3 is not a symbolic link

</code></pre>
</div>
</div>
<div class="cell code" id="vD4ar2RkUfK1">
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the necessary libraries</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pyomo.environ <span class="im">import</span> <span class="op">*</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the model</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> ConcreteModel()</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define decision variables</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>cars <span class="op">=</span> [<span class="st">&#39;MazdaCX5&#39;</span>, <span class="st">&#39;TeslaModel3&#39;</span>, <span class="st">&#39;FordFocus&#39;</span>, <span class="st">&#39;TeslaCybertruck&#39;</span>, <span class="st">&#39;JeepWrangler&#39;</span>]</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>students <span class="op">=</span> [<span class="st">&#39;Student1&#39;</span>, <span class="st">&#39;Student2&#39;</span>, <span class="st">&#39;Student3&#39;</span>]</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>distances <span class="op">=</span> {<span class="st">&#39;Student1&#39;</span>: <span class="dv">17</span>, <span class="st">&#39;Student2&#39;</span>: <span class="dv">12</span>, <span class="st">&#39;Student3&#39;</span>: <span class="dv">15</span>}</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Binary decision variable for car assignment (1 if car i is given to student j, 0 otherwise)</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>model.assign <span class="op">=</span> Var(((student, car) <span class="cf">for</span> student <span class="kw">in</span> students <span class="cf">for</span> car <span class="kw">in</span> cars), within<span class="op">=</span>Binary)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Objective: Minimize total distance driven</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> obj_rule(model):</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(model.assign[student, car] <span class="op">*</span> distances[student] <span class="cf">for</span> student <span class="kw">in</span> students <span class="cf">for</span> car <span class="kw">in</span> cars)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>model.objective <span class="op">=</span> Objective(rule<span class="op">=</span>obj_rule, sense<span class="op">=</span>minimize)</span></code></pre></div>
</div>
<div class="cell code" id="W20vhIxwU-eA">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Constraints</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Each car is given to exactly one student</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> one_car_rule(model, car):</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(model.assign[student, car] <span class="cf">for</span> student <span class="kw">in</span> students) <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>model.one_car_constraint <span class="op">=</span> Constraint(cars, rule<span class="op">=</span>one_car_rule)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># No student can receive more than three cars</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> max_three_cars_rule(model, student):</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(model.assign[student, car] <span class="cf">for</span> car <span class="kw">in</span> cars) <span class="op">&lt;=</span> <span class="dv">3</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>model.max_three_cars_constraint <span class="op">=</span> Constraint(students, rule<span class="op">=</span>max_three_cars_rule)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Each student must receive at least one car</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> min_one_car_rule(model, student):</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(model.assign[student, car] <span class="cf">for</span> car <span class="kw">in</span> cars) <span class="op">&gt;=</span> <span class="dv">1</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>model.min_one_car_constraint <span class="op">=</span> Constraint(students, rule<span class="op">=</span>min_one_car_rule)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># If a student gets one of the Teslas, they cannot receive the other Tesla [THIS IS THE CONSTRAINT THAT INITIALLY RECIEVED AN ERROR, IT IS NOW UPDATED]</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> one_tesla_rule(model, student):</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> model.assign[student, <span class="st">&#39;TeslaModel3&#39;</span>] <span class="op">+</span> model.assign[student, <span class="st">&#39;TeslaCybertruck&#39;</span>] <span class="op">&lt;=</span> <span class="dv">1</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>model.one_tesla_constraint <span class="op">=</span> Constraint(students, rule<span class="op">=</span>one_tesla_rule)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Student 2 may not receive more cars than Student 1</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> student1_fav_rule(model):</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span>(model.assign[<span class="st">&#39;Student2&#39;</span>, car] <span class="cf">for</span> car <span class="kw">in</span> cars) <span class="op">&lt;=</span> <span class="bu">sum</span>(model.assign[<span class="st">&#39;Student1&#39;</span>, car] <span class="cf">for</span> car <span class="kw">in</span> cars)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>model.student1_fav_constraint <span class="op">=</span> Constraint(rule<span class="op">=</span>student1_fav_rule)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co"># If Jeep Wrangler goes to Student 1, then Student 1 must also get the Ford Focus</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> jeep_focus_rule(model):</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> model.assign[<span class="st">&#39;Student1&#39;</span>, <span class="st">&#39;JeepWrangler&#39;</span>] <span class="op">-</span> model.assign[<span class="st">&#39;Student1&#39;</span>, <span class="st">&#39;FordFocus&#39;</span>] <span class="op">&lt;=</span> <span class="dv">0</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>model.jeep_focus_constraint <span class="op">=</span> Constraint(rule<span class="op">=</span>jeep_focus_rule)</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co"># If Student 1 gets the Ford Focus OR Student 2 gets the Cybertruck, then the CX-5 must go to Student 3</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cx5_rule(model):</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> model.assign[<span class="st">&#39;Student1&#39;</span>, <span class="st">&#39;FordFocus&#39;</span>] <span class="op">+</span> model.assign[<span class="st">&#39;Student2&#39;</span>, <span class="st">&#39;TeslaCybertruck&#39;</span>] <span class="op">-</span> model.assign[<span class="st">&#39;Student3&#39;</span>, <span class="st">&#39;MazdaCX5&#39;</span>] <span class="op">&lt;=</span> <span class="dv">0</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>model.cx5_constraint <span class="op">=</span> Constraint(rule<span class="op">=</span>cx5_rule)</span></code></pre></div>
</div>
<div class="cell code"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="r9thCJXGU7Uv" data-outputId="f019f024-a433-4d49-b835-54564a8ffbd0">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Solve the model</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>solver <span class="op">=</span> SolverFactory(<span class="st">&#39;glpk&#39;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>solver.solve(model)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the results</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Optimal Assignment:&quot;</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> student <span class="kw">in</span> students:</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> car <span class="kw">in</span> cars:</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> model.assign[student, car].value <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>car<span class="sc">}</span><span class="ss"> is given to </span><span class="sc">{</span>student<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Optimal Assignment:
FordFocus is given to Student1
TeslaCybertruck is given to Student1
TeslaModel3 is given to Student2
JeepWrangler is given to Student2
MazdaCX5 is given to Student3
</code></pre>
</div>
</div>
</body>
</html>
